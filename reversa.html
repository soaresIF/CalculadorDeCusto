<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Reversa - Produção Real</title>
    
    <style>
        :root {
            --shopee: #ee4d2d;
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #212529;
            --green: #198754;
            --blue: #0d6efd;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            background: var(--card);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        h2 { text-align: center; color: var(--shopee); margin-top: 0; }

        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: 600; margin-bottom: 5px; color: #495057; }
        
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1.1rem;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        input[type="number"]:focus { border-color: var(--shopee); outline: none; }

        .opcoes {
            background: #fff5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #ffebe9;
        }

        .row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #ffdeda;
        }
        .row:last-child { border-bottom: none; }

        input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--shopee); cursor: pointer; }

        button {
            width: 100%;
            background: var(--shopee);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        button:hover { opacity: 0.9; }

        /* Adicione isso junto com os estilos dos botões */
        .btn-clear { background: #f59e0b; color: white; margin-top: 10px; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; font-size: 1.1rem; cursor: pointer; }
        .btn-clear:hover { background: #d97706; }

        #resultado {
            margin-top: 25px;
            display: none;
            padding: 20px;
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .line { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.95rem; }
        .destaque { font-weight: bold; }
        .negativo { color: #dc3545; }
        .info-sub { font-size: 0.85rem; color: #6c757d; font-style: italic; margin-top: -5px; margin-bottom: 10px; text-align: right; display: block;}

        .final-box {
            margin-top: 15px;
            padding: 15px;
            background: #d1e7dd;
            border: 1px solid #badbcc;
            border-radius: 8px;
            text-align: center;
        }
        .final-valor { font-size: 2.2rem; font-weight: bold; color: var(--green); display: block; }
        .final-label { font-size: 0.9rem; color: #0f5132; }
        
        /* Ajuste do botão de navegação */
        .nav-container { text-align: center; margin-bottom: 15px; }

    </style>
</head>
<body>

<div class="nav-container">
    <a href="index.html"
    style="color: white; text-decoration: none; background-color: rgb(0, 68, 255); padding: 10px 20px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; box-shadow: 0 2px 4px rgba(0,0,0,0.2);"
    onmouseover="this.style.backgroundColor='#0033cc'"
    onmouseout="this.style.backgroundColor='rgb(0, 68, 255)'">
    ⬅ Voltar para Preços
    </a>
</div>

<div class="container">
    <h2>Análise de Lucro Real</h2>
    
    <div class="form-group">
        <label>Preço de Venda (Anunciado)</label>
        <input type="number" id="venda" placeholder="ex: 41.90" step="0.01" oninput="salvarReversa()">
    </div>

    <div class="form-group">
        <label>Custo Inserido (Material + 5,00)</label>
        <input type="number" id="custoInserido" placeholder="ex: 27.44" step="0.01"  oninput="salvarReversa()">
    </div>

    <div class="opcoes">
        <div class="row">
            <label>Taxas Shopee (22.5%)</label>
            <input type="checkbox" id="chkShopeePerc" checked onchange="salvarReversa()">
        </div>
        <div class="row">
            <label>Taxa Fixa Shopee (R$ 4,00)</label>
            <input type="checkbox" id="chkShopeeFixo" checked onchange="salvarReversa()">
        </div>
        <div class="row">
            <label>Imposto (6%)</label>
            <input type="checkbox" id="chkImposto" checked onchange="salvarReversa()">
        </div>
        <div class="row">
            <label>Ads (3%)</label>
            <input type="checkbox" id="chkAds" onchange="salvarReversa()">
        </div>
    </div>

    <button class="btn-clear" onclick="limparReversa()" style="margin-bottom: 15px;">Limpar Dados</button>

    <button onclick="calcular()">CALCULAR SOBRA REAL</button>
    <button class="btn-clear" onclick="limparReversa()" style="margin-bottom: 15px;">Limpar Dados</button>

    <div id="resultado">
        <div class="line"><span>Venda Bruta:</span> <span class="destaque">R$ <span id="resVenda">0,00</span></span></div>
        <div class="line"><span>(-) Taxas Shopee:</span> <span class="negativo" id="resTaxasShopee">0,00</span></div>
        <div class="line" style="border-bottom: 1px dashed #ccc; padding-bottom: 5px;"><span>(=) Líquido Shopee:</span> <span class="destaque">R$ <span id="resLiquido">0,00</span></span></div>
        
        <div style="margin-top: 10px;"></div>
        
        <div class="line"><span>(-) Custo Real Material:</span> <span class="negativo" id="resMaterialReal">0,00</span></div>
        <span class="info-sub" id="txtExplicaMaterial">(27.44 - 5.00 da mão de obra)</span>

        <div class="line"><span>(-) Imposto (se marcado):</span> <span class="negativo" id="resImposto">0,00</span></div>
        <div class="line"><span>(-) Ads (se marcado):</span> <span class="negativo" id="resAds">0,00</span></div>
        
        <div class="final-box">
            <span class="final-label">Sobra Real (Lucro Líquido):</span>
            <span class="final-valor" id="resFinal">R$ 0,00</span>
        </div>
    </div>
</div>

<script>
    // --- STORAGE ---
    function salvarReversa() {
        localStorage.setItem('rev_venda', document.getElementById('venda').value);
        localStorage.setItem('rev_custo', document.getElementById('custoInserido').value);
        localStorage.setItem('rev_chkShopeePerc', document.getElementById('chkShopeePerc').checked);
        localStorage.setItem('rev_chkShopeeFixo', document.getElementById('chkShopeeFixo').checked);
        localStorage.setItem('rev_chkImposto', document.getElementById('chkImposto').checked);
        localStorage.setItem('rev_chkAds', document.getElementById('chkAds').checked);
    }

    function carregarReversa() {
        if(localStorage.getItem('rev_venda')) document.getElementById('venda').value = localStorage.getItem('rev_venda');
        if(localStorage.getItem('rev_custo')) document.getElementById('custoInserido').value = localStorage.getItem('rev_custo');
        
        if(localStorage.getItem('rev_chkShopeePerc') !== null) 
            document.getElementById('chkShopeePerc').checked = (localStorage.getItem('rev_chkShopeePerc') === 'true');
        
        if(localStorage.getItem('rev_chkShopeeFixo') !== null) 
            document.getElementById('chkShopeeFixo').checked = (localStorage.getItem('rev_chkShopeeFixo') === 'true');

        if(localStorage.getItem('rev_chkImposto') !== null) 
            document.getElementById('chkImposto').checked = (localStorage.getItem('rev_chkImposto') === 'true');

        if(localStorage.getItem('rev_chkAds') !== null) 
            document.getElementById('chkAds').checked = (localStorage.getItem('rev_chkAds') === 'true');
    }

    function calcular() {
        const venda = parseFloat(document.getElementById('venda').value);
        const custoInserido = parseFloat(document.getElementById('custoInserido').value);

        if (isNaN(venda) || isNaN(custoInserido)) {
            alert("Preencha os valores de venda e custo.");
            return;
        }

        // 1. Calcular o Material Real (Valor Inserido - 5,00)
        const custoMaterialReal = custoInserido - 5.00;

        // 2. Taxas Shopee
        let valShopeePerc = document.getElementById('chkShopeePerc').checked ? (venda * 0.225) : 0;
        let valShopeeFixo = document.getElementById('chkShopeeFixo').checked ? 4.00 : 0;
        let totalShopeeDesconto = valShopeePerc + valShopeeFixo;
        
        let liquidoShopee = venda - totalShopeeDesconto;

        // 3. Imposto e Ads (Sobre o bruto)
        let valImposto = document.getElementById('chkImposto').checked ? (venda * 0.06) : 0;
        let valAds = document.getElementById('chkAds').checked ? (venda * 0.03) : 0;

        // 4. Cálculo Final da Sobra
        let sobraFinal = liquidoShopee - valImposto - valAds - custoMaterialReal;

        // --- Atualizar a tela ---
        document.getElementById('resVenda').innerText = venda.toFixed(2);
        document.getElementById('resTaxasShopee').innerText = `- R$ ${totalShopeeDesconto.toFixed(2)}`;
        document.getElementById('resLiquido').innerText = liquidoShopee.toFixed(2);
        
        document.getElementById('resMaterialReal').innerText = `- R$ ${custoMaterialReal.toFixed(2)}`;
        document.getElementById('txtExplicaMaterial').innerText = `(Valor inserido R$ ${custoInserido.toFixed(2)} - R$ 5,00)`;

        document.getElementById('resImposto').innerText = `- R$ ${valImposto.toFixed(2)}`;
        document.getElementById('resAds').innerText = `- R$ ${valAds.toFixed(2)}`;
        
        const finalElement = document.getElementById('resFinal');
        finalElement.innerText = `R$ ${sobraFinal.toFixed(2)}`;

        const box = document.querySelector('.final-box');
        if (sobraFinal < 0) {
            finalElement.style.color = "#dc3545"; // Vermelho
            box.style.background = "#f8d7da";
            box.style.borderColor = "#f5c6cb";
        } else if (sobraFinal < 5) {
            finalElement.style.color = "#fd7e14"; // Laranja
            box.style.background = "#fff3cd";
            box.style.borderColor = "#ffecb5";
        } else {
            finalElement.style.color = "#198754"; // Verde
            box.style.background = "#d1e7dd";
            box.style.borderColor = "#badbcc";
        }

        document.getElementById('resultado').style.display = 'block';
    }
    function limparReversa() {
    if (confirm("Deseja apagar todos os valores?")) {
        // 1. Limpa memória do navegador
        localStorage.removeItem('rev_venda');
        localStorage.removeItem('rev_custo');
        localStorage.removeItem('rev_chkShopeePerc');
        localStorage.removeItem('rev_chkShopeeFixo');
        localStorage.removeItem('rev_chkImposto');
        localStorage.removeItem('rev_chkAds');

        // 2. ZERA VISUALMENTE OS CAMPOS (Essa é a parte que faltava)
        document.getElementById('venda').value = "";
        document.getElementById('custoInserido').value = "";
        
        // 3. Reseta checkboxes
        document.getElementById('chkShopeePerc').checked = true;
        document.getElementById('chkShopeeFixo').checked = true;
        document.getElementById('chkImposto').checked = true;
        document.getElementById('chkAds').checked = false;

        // 4. Esconde o resultado
        document.getElementById('resultado').style.display = 'none';
    }
}

    carregarReversa();
</script>

</body>

</html>

